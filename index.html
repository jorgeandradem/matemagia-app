<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mate Magia - Aprende Jugando</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#FFC107">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="MateMagiaApp_Ico_Lego.png">
    <link rel="icon" type="image/png" href="MateMagiaApp_Ico_Lego.png">

    <style>
        :root {
            --primary: #FFC107; /* Amber */
            --secondary: #4CAF50; /* Green */
            --accent: #2196F3; /* Blue */
            --danger: #F44336; /* Red */
            --text: #37474F;
            --bg: #F0F4F8;
            --white: #ffffff;
            --radius: 20px;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg);
            margin: 0;
            display: flex;
            justify-content: center;
            height: 100dvh;
            overflow: hidden;
            user-select: none;
            color: var(--text);
        }

        #app {
            width: 100%; max-width: 480px; height: 100%;
            background: var(--white); display: flex; flex-direction: column;
            position: relative; box-shadow: 0 0 20px rgba(0,0,0,0.05);
        }

        /* PANTALLAS */
        .screen { display: none; flex-direction: column; height: 100%; padding: 20px; animation: fade 0.3s ease-out; overflow-y: auto; }
        .screen.active { display: flex; }
        @keyframes fade { from {opacity:0; transform: translateY(10px);} to {opacity:1; transform: translateY(0);} }

        /* UTILIDADES */
        .flex-grow { flex-grow: 1; }
        .center { display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .row { display: flex; gap: 10px; width: 100%; }
        h1, h2, h3 { margin: 10px 0; }
        h1 { font-family: 'Quicksand', sans-serif; color: var(--accent); font-size: 2.2rem; }

        /* LOGO */
        .logo { width: 140px; margin: 20px auto; display: block; filter: drop-shadow(0 4px 4px rgba(0,0,0,0.1)); }

        /* BOTONES */
        .btn {
            background: var(--accent); color: white; border: none;
            padding: 16px; border-radius: var(--radius);
            font-size: 1.1rem; font-weight: 800; width: 100%;
            box-shadow: 0 4px 0 #1976D2; cursor: pointer;
            margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px;
            transition: transform 0.1s;
            font-family: 'Nunito', sans-serif;
        }
        .btn:active { transform: translateY(4px); box-shadow: none; }
        .btn-green { background: var(--secondary); box-shadow: 0 4px 0 #388E3C; }
        .btn-red { background: var(--danger); box-shadow: 0 4px 0 #D32F2F; }
        .btn-outline { background: transparent; border: 2px solid #CFD8DC; color: #90A4AE; box-shadow: none; }
        .btn-small { padding: 8px 16px; font-size: 0.9rem; width: auto; }

        /* AVATARES & USUARIOS */
        .avatar-grid { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin: 20px 0; }
        .avatar-opt {
            font-size: 3rem; padding: 10px; border: 3px solid #ECEFF1; border-radius: 50%;
            cursor: pointer; transition: 0.2s; background: #fff;
        }
        .avatar-opt.selected { border-color: var(--secondary); background: #E8F5E9; transform: scale(1.1); }
        
        .user-list { display: flex; flex-direction: column; gap: 10px; width: 100%; }
        .user-card {
            background: #fff; border: 2px solid #ECEFF1; border-radius: 16px; padding: 15px;
            display: flex; align-items: center; cursor: pointer; transition: 0.1s;
        }
        .user-card:active { transform: scale(0.98); border-color: var(--accent); }
        .u-avatar { font-size: 2.5rem; margin-right: 15px; }
        .u-info { flex-grow: 1; text-align: left; }
        .u-name { font-weight: bold; font-size: 1.1rem; }
        .u-score { font-size: 0.9rem; color: #78909C; }
        .edit-btn { background: none; border: none; font-size: 1.2rem; cursor: pointer; color: #B0BEC5; }

        /* INPUTS */
        input {
            padding: 15px; font-size: 1.2rem; text-align: center; width: 100%;
            border: 2px solid #CFD8DC; border-radius: var(--radius); outline: none;
            font-family: 'Nunito', sans-serif; font-weight: bold; color: var(--text);
        }
        input:focus { border-color: var(--accent); }

        /* DASHBOARD */
        .top-bar {
            display: flex; justify-content: space-between; align-items: center;
            background: #fff; padding: 10px 15px; border-radius: 16px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-bottom: 20px;
        }
        .medals { display: flex; gap: 5px; font-size: 1.2rem; }
        
        .grid-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .menu-item {
            background: #fff; border: 2px solid #ECEFF1; border-radius: 16px; padding: 20px;
            text-align: center; font-weight: bold; font-size: 1.1rem; cursor: pointer;
            box-shadow: 0 4px 0 #ECEFF1; color: var(--text);
        }
        .menu-item:active { transform: translateY(4px); box-shadow: none; border-color: var(--accent); color: var(--accent); }
        .menu-item.random { grid-column: span 2; background: #E3F2FD; border-color: #BBDEFB; color: #1976D2; box-shadow: 0 4px 0 #90CAF9; }

        /* JUEGO */
        .game-header { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .progress-container { flex-grow: 1; height: 12px; background: #ECEFF1; border-radius: 6px; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--secondary); width: 0%; transition: 0.3s; }
        
        .question-box {
            flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: #fff; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .q-text { font-size: 3.5rem; font-weight: 900; color: var(--accent); margin: 0; font-family: 'Quicksand', sans-serif; }
        .ans-text { 
            font-size: 2.5rem; border-bottom: 3px solid #CFD8DC; min-width: 100px; 
            text-align: center; min-height: 50px; margin-top: 10px; color: var(--text); font-weight: bold;
        }

        .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .key {
            background: #fff; border: 2px solid #ECEFF1; border-radius: 12px; padding: 15px;
            font-size: 1.5rem; font-weight: bold; color: var(--text); cursor: pointer;
            box-shadow: 0 4px 0 #ECEFF1; display: flex; justify-content: center; align-items: center;
        }
        .key:active { transform: translateY(4px); box-shadow: none; }
        .key-ok { background: var(--secondary); color: white; border-color: #388E3C; box-shadow: 0 4px 0 #388E3C; }

        /* REPASO */
        .study-list { flex-grow: 1; overflow-y: auto; text-align: center; font-size: 1.3rem; line-height: 2.2; }
        .study-row { border-bottom: 1px solid #eee; }
        .study-row b { color: var(--accent); }

        /* RELAX */
        .relax-screen { background: #E1F5FE; text-align: center; justify-content: center; }
        .breathe-circle {
            width: 200px; height: 200px; background: #9575CD; border-radius: 50%;
            margin: 40px auto; display: flex; align-items: center; justify-content: center;
            color: white; font-size: 1.5rem; font-weight: bold;
            box-shadow: 0 0 30px rgba(149, 117, 205, 0.4);
            animation: breathe 4s infinite ease-in-out;
        }
        @keyframes breathe { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

        /* MODAL */
        .modal-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 100; display: none;
            justify-content: center; align-items: center; animation: fade 0.2s;
        }
        .modal-content {
            background: white; padding: 30px; border-radius: 20px; text-align: center; width: 85%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2); animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes pop { from { transform: scale(0.5); } to { transform: scale(1); } }
        .medal-icon { font-size: 5rem; display: block; margin-bottom: 10px; }

    </style>
</head>
<body>

<div id="app">

    <div id="screen-home" class="screen active center">
        <img src="MateMagiaApp_Ico_Lego.png" class="logo" alt="Logo Mate Magia">
        <h1>Mate Magia</h1>
        <p>¬°Aprende las tablas jugando!</p>
        <div class="flex-grow"></div>
        <button class="btn btn-green" onclick="App.checkUsers()">¬°ENTRAR A CLASE!</button>
        <button class="btn btn-outline" onclick="App.nav('screen-users')">CAMBIAR ALUMNO</button>
    </div>

    <div id="screen-users" class="screen">
        <h2 class="center">¬øQui√©n va a jugar?</h2>
        <div id="user-list-container" class="user-list flex-grow"></div>
        <button class="btn" onclick="User.goCreate()">+ NUEVO ALUMNO</button>
        <button class="btn btn-outline" onclick="App.nav('screen-home')">VOLVER</button>
    </div>

    <div id="screen-create" class="screen center">
        <h2 id="create-title">Nuevo Alumno</h2>
        <p>Elige tu avatar:</p>
        <div id="avatar-container" class="avatar-grid"></div>
        <input type="text" id="input-name" placeholder="Tu nombre aqu√≠" maxlength="10">
        <div class="flex-grow"></div>
        <button class="btn btn-green" onclick="User.save()">GUARDAR</button>
        <button class="btn btn-outline" onclick="App.nav('screen-users')">CANCELAR</button>
    </div>

    <div id="screen-dash" class="screen">
        <div class="top-bar">
            <div style="display:flex; align-items:center;">
                <span id="dash-avatar" style="font-size:2rem; margin-right:10px;"></span>
                <div>
                    <div id="dash-name" style="font-weight:bold;"></div>
                    <div style="font-size:0.8rem; color:#78909C;">Puntos: <span id="dash-score">0</span></div>
                </div>
            </div>
            <div id="dash-medals" class="medals"></div>
        </div>

        <h3 style="color:var(--accent)">Elige tu misi√≥n:</h3>
        <div class="grid-menu flex-grow">
            <div class="menu-item random" onclick="Game.start('random')">üé≤ QUIZ SORPRESA</div>
            <div id="tables-container" style="display:contents;"></div>
        </div>
        
        <div class="row" style="margin-top:15px;">
            <button class="btn btn-outline" onclick="App.nav('screen-review-menu')">üìò REPASAR</button>
            <button class="btn btn-red" onclick="App.logout()">SALIR</button>
        </div>
    </div>

    <div id="screen-game" class="screen">
        <div class="game-header">
            <button class="btn-outline btn-small" onclick="Game.quit()">‚úñ</button>
            <div class="progress-container"><div id="game-bar" class="progress-bar"></div></div>
            <span style="font-weight:bold; color:var(--accent)">‚≠ê <span id="game-score-display">0</span></span>
        </div>

        <div class="question-box">
            <div id="q-text" class="q-text">2 x 2</div>
            <div id="ans-text" class="ans-text"></div>
        </div>

        <div class="numpad">
            <div class="key" onclick="Game.input(1)">1</div>
            <div class="key" onclick="Game.input(2)">2</div>
            <div class="key" onclick="Game.input(3)">3</div>
            <div class="key" onclick="Game.input(4)">4</div>
            <div class="key" onclick="Game.input(5)">5</div>
            <div class="key" onclick="Game.input(6)">6</div>
            <div class="key" onclick="Game.input(7)">7</div>
            <div class="key" onclick="Game.input(8)">8</div>
            <div class="key" onclick="Game.input(9)">9</div>
            <div class="key" onclick="Game.del()">‚å´</div>
            <div class="key" onclick="Game.input(0)">0</div>
            <div class="key key-ok" onclick="Game.check()">OK</div>
        </div>
        <button class="btn btn-outline" style="margin-top:15px;" onclick="Audio.startRelax()">‚òï DESCANSO</button>
    </div>

    <div id="screen-review-menu" class="screen">
        <div class="top-bar">
            <h2>üìö Zona de Estudio</h2>
            <button class="btn-outline btn-small" onclick="App.nav('screen-dash')">‚úñ</button>
        </div>
        <div class="grid-menu" id="review-grid"></div>
    </div>

    <div id="screen-study" class="screen">
        <div class="top-bar">
            <h2 id="study-title">Tabla del 1</h2>
            <button class="btn-outline btn-small" onclick="App.nav('screen-review-menu')">‚úñ</button>
        </div>
        <div id="study-content" class="study-list"></div>
        <div class="row">
            <button class="btn btn-outline" onclick="Study.prev()">‚¨Ö ANTERIOR</button>
            <button class="btn btn-green" onclick="Study.next()">SIGUIENTE ‚û°</button>
        </div>
    </div>

    <div id="screen-relax" class="screen relax-screen">
        <h2 style="color:#5E35B1">Zona de Relax</h2>
        <p style="color:#7E57C2">Cierra los ojos y escucha...</p>
        <div class="breathe-circle">Respira</div>
        <button class="btn" style="background:#7E57C2; color:white; width:auto; margin-top:40px;" onclick="Audio.stopRelax()">VOLVER A CLASE</button>
    </div>

    <div id="modal" class="modal-overlay">
        <div class="modal-content">
            <span id="modal-icon" class="medal-icon">üèÜ</span>
            <h2 id="modal-title">¬°Genial!</h2>
            <p id="modal-msg">Has ganado puntos</p>
            <button class="btn btn-green" onclick="document.getElementById('modal').style.display='none'">CONTINUAR</button>
        </div>
    </div>

</div>

<script>
    /** --- AUDIO ENGINE (Web Audio API & Speech) --- */
    const Audio = {
        ctx: null,
        bgmTimer: null,
        
        init: () => {
            if (!Audio.ctx) Audio.ctx = new (window.AudioContext || window.webkitAudioContext)();
            if (Audio.ctx.state === 'suspended') Audio.ctx.resume();
        },
        playTone: (freq, type, dur, vol) => {
            if (!Audio.ctx) return;
            const osc = Audio.ctx.createOscillator();
            const gain = Audio.ctx.createGain();
            osc.type = type; osc.frequency.value = freq;
            gain.gain.setValueAtTime(0, Audio.ctx.currentTime);
            gain.gain.linearRampToValueAtTime(vol, Audio.ctx.currentTime + 0.05);
            gain.gain.exponentialRampToValueAtTime(0.001, Audio.ctx.currentTime + dur);
            osc.connect(gain); gain.connect(Audio.ctx.destination);
            osc.start(); osc.stop(Audio.ctx.currentTime + dur);
        },
        click: () => Audio.playTone(400, 'triangle', 0.1, 0.1),
        correct: () => { Audio.playTone(600, 'sine', 0.1, 0.1); setTimeout(() => Audio.playTone(900, 'sine', 0.3, 0.1), 100); },
        wrong: () => Audio.playTone(150, 'sawtooth', 0.4, 0.1),
        win: () => { 
            [523, 659, 784, 1046].forEach((f, i) => setTimeout(() => Audio.playTone(f, 'square', 0.4, 0.1), i * 150));
        },
        speak: (text) => {
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(text);
            u.lang = 'es-ES'; u.rate = 0.9; u.pitch = 0.8; // Voz masculina/profesional
            window.speechSynthesis.speak(u);
        },
        startRelax: () => {
            App.nav('screen-relax');
            // Melod√≠a ambiental generada (Pentat√≥nica)
            const notes = [196, 220, 246, 293, 329]; 
            Audio.bgmTimer = setInterval(() => {
                const f = notes[Math.floor(Math.random() * notes.length)];
                Audio.playTone(f, 'sine', 3, 0.02);
            }, 2000);
        },
        stopRelax: () => {
            clearInterval(Audio.bgmTimer);
            App.nav('screen-game');
        }
    };

    /** --- DATOS --- */
    const AVATARS = ['ü¶â', 'ü¶ä', 'üêØ', 'ü¶Å', 'üê∏', 'üêº'];
    const MEDALS = [
        { k: 'bronze', s: 50, i: 'ü•â', n: 'Bronce' },
        { k: 'silver', s: 150, i: 'ü•à', n: 'Plata' },
        { k: 'gold', s: 300, i: 'ü•á', n: 'Oro' },
        { k: 'diamond', s: 500, i: 'üíé', n: 'Diamante' }
    ];
    let DB = JSON.parse(localStorage.getItem('matemagia_v1')) || { users: [] };
    let CURR_USER_IDX = -1;
    let TEMP_AVATAR = AVATARS[0];

    /** --- APLICACI√ìN --- */
    const App = {
        nav: (id) => {
            Audio.click();
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        },
        checkUsers: () => {
            Audio.init();
            if (DB.users.length === 0) User.goCreate();
            else if (DB.users.length === 1) User.login(0);
            else App.nav('screen-users');
            User.renderList();
        },
        saveDB: () => localStorage.setItem('matemagia_v1', JSON.stringify(DB)),
        logout: () => { CURR_USER_IDX = -1; App.nav('screen-home'); }
    };

    /** --- USUARIOS --- */
    const User = {
        goCreate: () => {
            User.renderAvatars();
            document.getElementById('create-title').innerText = "Nuevo Alumno";
            document.getElementById('input-name').value = '';
            CURR_USER_IDX = -1; // Modo creaci√≥n
            App.nav('screen-create');
        },
        goEdit: (idx, e) => {
            e.stopPropagation();
            CURR_USER_IDX = idx; // Modo edici√≥n
            const u = DB.users[idx];
            TEMP_AVATAR = u.avatar;
            User.renderAvatars();
            document.getElementById('create-title').innerText = "Editar Alumno";
            document.getElementById('input-name').value = u.name;
            App.nav('screen-create');
        },
        renderAvatars: () => {
            const el = document.getElementById('avatar-container'); el.innerHTML = '';
            AVATARS.forEach(av => {
                const d = document.createElement('div');
                d.className = 'avatar-opt ' + (av === TEMP_AVATAR ? 'selected' : '');
                d.innerText = av;
                d.onclick = () => { Audio.click(); TEMP_AVATAR = av; User.renderAvatars(); };
                el.appendChild(d);
            });
        },
        save: () => {
            const name = document.getElementById('input-name').value.trim();
            if (!name) return alert("Escribe un nombre");
            
            if (CURR_USER_IDX === -1) { // Crear
                if (DB.users.length >= 3) return alert("M√°ximo 3 alumnos.");
                DB.users.push({ name, avatar: TEMP_AVATAR, score: 0, medals: [] });
                CURR_USER_IDX = DB.users.length - 1;
            } else { // Editar
                DB.users[CURR_USER_IDX].name = name;
                DB.users[CURR_USER_IDX].avatar = TEMP_AVATAR;
            }
            App.saveDB();
            User.login(CURR_USER_IDX);
        },
        renderList: () => {
            const el = document.getElementById('user-list-container'); el.innerHTML = '';
            DB.users.forEach((u, idx) => {
                const d = document.createElement('div');
                d.className = 'user-card';
                d.innerHTML = `
                    <span class="u-avatar">${u.avatar}</span>
                    <div class="u-info">
                        <div class="u-name">${u.name}</div>
                        <div class="u-score">‚≠ê ${u.score}</div>
                    </div>
                    <button class="edit-btn" onclick="User.goEdit(${idx}, event)">‚úé</button>
                `;
                d.onclick = (e) => { if(e.target.tagName !== 'BUTTON') User.login(idx); };
                el.appendChild(d);
            });
        },
        login: (idx) => {
            CURR_USER_IDX = idx;
            const u = DB.users[idx];
            document.getElementById('dash-name').innerText = u.name;
            document.getElementById('dash-avatar').innerText = u.avatar;
            document.getElementById('dash-score').innerText = u.score;
            User.updateMedals(u);
            
            // Render Tablas
            const tc = document.getElementById('tables-container'); tc.innerHTML = '';
            const rc = document.getElementById('review-grid'); rc.innerHTML = '';
            for(let i=1; i<=10; i++) {
                tc.innerHTML += `<div class="menu-item" onclick="Game.start(${i})">TABLA ${i}</div>`;
                rc.innerHTML += `<div class="menu-item" onclick="Study.open(${i})">TABLA ${i}</div>`;
            }
            
            Audio.speak(`Hola ${u.name}`);
            App.nav('screen-dash');
        },
        updateMedals: (u) => {
            let html = '';
            u.medals.forEach(k => {
                const m = MEDALS.find(x => x.k === k);
                if(m) html += m.i;
            });
            document.getElementById('dash-medals').innerHTML = html;
        }
    };

    /** --- JUEGO --- */
    const Game = {
        table: 0, score: 0, q: 0, total: 10,
        n1: 0, n2: 0, ans: 0,
        
        start: (t) => {
            Game.table = t; Game.score = 0; Game.q = 0;
            document.getElementById('game-score-display').innerText = 0;
            Game.next();
            App.nav('screen-game');
        },
        next: () => {
            document.getElementById('ans-text').innerText = '';
            if (Game.q >= Game.total) return Game.finish();
            Game.q++;
            document.getElementById('game-bar').style.width = ((Game.q - 1) / Game.total * 100) + '%';
            
            const n1 = (Game.table === 'random') ? Math.ceil(Math.random() * 10) : Game.table;
            const n2 = Math.ceil(Math.random() * 10);
            Game.n1 = n1; Game.n2 = n2; Game.ans = n1 * n2;
            
            document.getElementById('q-text').innerText = `${n1} x ${n2}`;
            Audio.speak(`${n1} por ${n2}`);
        },
        input: (n) => {
            Audio.click();
            const el = document.getElementById('ans-text');
            if (el.innerText.length < 3) el.innerText += n;
        },
        del: () => {
            Audio.click();
            const el = document.getElementById('ans-text');
            el.innerText = el.innerText.slice(0, -1);
        },
        check: () => {
            const val = parseInt(document.getElementById('ans-text').innerText);
            if (isNaN(val)) return;
            
            if (val === Game.ans) {
                Audio.correct(); Game.score++;
                DB.users[CURR_USER_IDX].score++;
                Game.checkMedals();
                App.saveDB();
                Game.next();
            } else {
                Audio.wrong();
                Audio.speak(`No. Es ${Game.ans}`);
                // Mostrar respuesta correcta brevemente
                document.getElementById('ans-text').innerText = Game.ans;
                document.getElementById('ans-text').style.color = 'var(--danger)';
                setTimeout(() => {
                    document.getElementById('ans-text').style.color = 'var(--text)';
                    Game.next();
                }, 1500);
            }
            document.getElementById('game-score-display').innerText = Game.score;
        },
        checkMedals: () => {
            const u = DB.users[CURR_USER_IDX];
            let win = null;
            MEDALS.forEach(m => {
                if (u.score >= m.s && !u.medals.includes(m.k)) win = m;
            });
            if (win) {
                u.medals.push(win.k);
                Game.modal(win.i, "¬°Nueva Medalla!", "Has alcanzado nivel " + win.n);
            }
        },
        finish: () => {
            Audio.win();
            Game.modal("üéì", "¬°Sesi√≥n Terminada!", `Aciertos: ${Game.score}/${Game.total}`);
            User.login(CURR_USER_IDX); // Refrescar datos
        },
        quit: () => { if (confirm("¬øSalir de la pr√°ctica?")) App.nav('screen-dash'); },
        modal: (icon, title, msg) => {
            document.getElementById('modal-icon').innerText = icon;
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-msg').innerText = msg;
            document.getElementById('modal').style.display = 'flex';
        }
    };

    /** --- ESTUDIO --- */
    const Study = {
        curr: 1,
        open: (t) => {
            Study.curr = t;
            document.getElementById('study-title').innerText = "Tabla del " + t;
            const el = document.getElementById('study-content'); el.innerHTML = '';
            for (let i = 1; i <= 10; i++) {
                el.innerHTML += `<div class="study-row">${t} x ${i} = <b>${t * i}</b></div>`;
            }
            App.nav('screen-study');
        },
        next: () => { if (Study.curr < 10) Study.open(Study.curr + 1); },
        prev: () => { if (Study.curr > 1) Study.open(Study.curr - 1); }
    };

</script>
</body>
</html>